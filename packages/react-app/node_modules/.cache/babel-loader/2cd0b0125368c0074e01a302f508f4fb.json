{"ast":null,"code":"import _regeneratorRuntime from\"/Users/daddio/Documents/Scaffold-Eth/SpeedRunEthereum/Challenge3/challenge-5-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/daddio/Documents/Scaffold-Eth/SpeedRunEthereum/Challenge3/challenge-5-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/daddio/Documents/Scaffold-Eth/SpeedRunEthereum/Challenge3/challenge-5-dex/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{SendOutlined}from\"@ant-design/icons\";import{Button,Input,Tooltip}from\"antd\";// import { useLookupAddress } from \"eth-hooks/dapps/ens\";\nimport React,{useCallback,useState,useEffect}from\"react\";import Blockies from\"react-blockies\";import{Transactor}from\"../helpers\";import Wallet from\"./Wallet\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _require=require(\"ethers\"),utils=_require.utils;// improved a bit by converting address to ens if it exists\n// added option to directly input ens name\n// added placeholder option\n/*\n  ~ What it does? ~\n\n  Displays a local faucet to send ETH to given address, also wallet is provided\n\n  ~ How can I use? ~\n\n  <Faucet\n    price={price}\n    localProvider={localProvider}\n    ensProvider={mainnetProvider}\n    placeholder={\"Send local faucet\"}\n  />\n\n  ~ Features ~\n\n  - Provide price={price} of ether and convert between USD and ETH in a wallet\n  - Provide localProvider={localProvider} to be able to send ETH to given address\n  - Provide ensProvider={mainnetProvider} and your address will be replaced by ENS name\n              (ex. \"0xa870\" => \"user.eth\") or you can enter directly ENS name instead of address\n              works both in input field & wallet\n  - Provide placeholder=\"Send local faucet\" value for the input\n*/export default function Faucet(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),address=_useState2[0],setAddress=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),faucetAddress=_useState4[0],setFaucetAddress=_useState4[1];var price=props.price,placeholder=props.placeholder,localProvider=props.localProvider,ensProvider=props.ensProvider,onChange=props.onChange;useEffect(function(){var getFaucetAddress=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _faucetAddress;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!localProvider){_context.next=5;break;}_context.next=3;return localProvider.listAccounts();case 3:_faucetAddress=_context.sent;setFaucetAddress(_faucetAddress[0]);//console.log(_faucetAddress);\ncase 5:case\"end\":return _context.stop();}}},_callee);}));return function getFaucetAddress(){return _ref.apply(this,arguments);};}();getFaucetAddress();},[localProvider]);var blockie;if(address&&typeof address.toLowerCase===\"function\"){blockie=/*#__PURE__*/_jsx(Blockies,{seed:address.toLowerCase(),size:8,scale:4});}else{blockie=/*#__PURE__*/_jsx(\"div\",{});}// const ens = useLookupAddress(ensProvider, address);\nvar updateAddress=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newValue){var newAddress;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(typeof newValue!==\"undefined\"&&utils.isAddress(newValue)){newAddress=newValue;// if (newAddress.indexOf(\".eth\") > 0 || newAddress.indexOf(\".xyz\") > 0) {\n//   try {\n//     const possibleAddress = await ensProvider.resolveName(newAddress);\n//     if (possibleAddress) {\n//       newAddress = possibleAddress;\n//     }\n//     // eslint-disable-next-line no-empty\n//   } catch (e) { }\n// }\nsetAddress(newAddress);}case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x){return _ref2.apply(this,arguments);};}(),[ensProvider,onChange]);var tx=Transactor(localProvider);return/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(Input,{size:\"large\",placeholder:placeholder?placeholder:\"local faucet\",prefix:blockie,value:address// value={ens || address}\n,onChange:function onChange(e){// setAddress(e.target.value);\nupdateAddress(e.target.value);},suffix:/*#__PURE__*/_jsxs(Tooltip,{title:\"Faucet: Send local ether to an address.\",children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){tx({to:address,value:utils.parseEther(\"0.01\")});setAddress(\"\");},shape:\"circle\",icon:/*#__PURE__*/_jsx(SendOutlined,{})}),/*#__PURE__*/_jsx(Wallet,{color:\"#888888\",provider:localProvider,ensProvider:ensProvider,price:price,address:faucetAddress})]})})});}","map":{"version":3,"sources":["/Users/daddio/Documents/Scaffold-Eth/SpeedRunEthereum/Challenge3/challenge-5-dex/packages/react-app/src/components/Faucet.jsx"],"names":["SendOutlined","Button","Input","Tooltip","React","useCallback","useState","useEffect","Blockies","Transactor","Wallet","require","utils","Faucet","props","address","setAddress","faucetAddress","setFaucetAddress","price","placeholder","localProvider","ensProvider","onChange","getFaucetAddress","listAccounts","_faucetAddress","blockie","toLowerCase","updateAddress","newValue","isAddress","newAddress","tx","e","target","value","to","parseEther"],"mappings":"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","sourcesContent":["import { SendOutlined } from \"@ant-design/icons\";\nimport { Button, Input, Tooltip } from \"antd\";\n// import { useLookupAddress } from \"eth-hooks/dapps/ens\";\nimport React, { useCallback, useState, useEffect } from \"react\";\nimport Blockies from \"react-blockies\";\nimport { Transactor } from \"../helpers\";\nimport Wallet from \"./Wallet\";\n\nconst { utils } = require(\"ethers\");\n\n// improved a bit by converting address to ens if it exists\n// added option to directly input ens name\n// added placeholder option\n\n/*\n  ~ What it does? ~\n\n  Displays a local faucet to send ETH to given address, also wallet is provided\n\n  ~ How can I use? ~\n\n  <Faucet\n    price={price}\n    localProvider={localProvider}\n    ensProvider={mainnetProvider}\n    placeholder={\"Send local faucet\"}\n  />\n\n  ~ Features ~\n\n  - Provide price={price} of ether and convert between USD and ETH in a wallet\n  - Provide localProvider={localProvider} to be able to send ETH to given address\n  - Provide ensProvider={mainnetProvider} and your address will be replaced by ENS name\n              (ex. \"0xa870\" => \"user.eth\") or you can enter directly ENS name instead of address\n              works both in input field & wallet\n  - Provide placeholder=\"Send local faucet\" value for the input\n*/\n\nexport default function Faucet(props) {\n  const [address, setAddress] = useState();\n  const [faucetAddress, setFaucetAddress] = useState();\n\n  const { price, placeholder, localProvider, ensProvider, onChange } = props;\n\n  useEffect(() => {\n    const getFaucetAddress = async () => {\n      if (localProvider) {\n        const _faucetAddress = await localProvider.listAccounts();\n        setFaucetAddress(_faucetAddress[0]);\n        //console.log(_faucetAddress);\n      }\n    };\n    getFaucetAddress();\n  }, [localProvider]);\n\n  let blockie;\n  if (address && typeof address.toLowerCase === \"function\") {\n    blockie = <Blockies seed={address.toLowerCase()} size={8} scale={4} />;\n  } else {\n    blockie = <div />;\n  }\n\n  // const ens = useLookupAddress(ensProvider, address);\n\n  const updateAddress = useCallback(\n    async newValue => {\n      if (typeof newValue !== \"undefined\" && utils.isAddress(newValue)) {\n        let newAddress = newValue;\n        // if (newAddress.indexOf(\".eth\") > 0 || newAddress.indexOf(\".xyz\") > 0) {\n        //   try {\n        //     const possibleAddress = await ensProvider.resolveName(newAddress);\n        //     if (possibleAddress) {\n        //       newAddress = possibleAddress;\n        //     }\n        //     // eslint-disable-next-line no-empty\n        //   } catch (e) { }\n        // }\n        setAddress(newAddress);\n      }\n    },\n    [ensProvider, onChange],\n  );\n\n  const tx = Transactor(localProvider);\n\n  return (\n    <span>\n      <Input\n        size=\"large\"\n        placeholder={placeholder ? placeholder : \"local faucet\"}\n        prefix={blockie}\n        value={address}\n        // value={ens || address}\n        onChange={e => {\n          // setAddress(e.target.value);\n          updateAddress(e.target.value);\n        }}\n        suffix={\n          <Tooltip title=\"Faucet: Send local ether to an address.\">\n            <Button\n              onClick={() => {\n                tx({\n                  to: address,\n                  value: utils.parseEther(\"0.01\"),\n                });\n                setAddress(\"\");\n              }}\n              shape=\"circle\"\n              icon={<SendOutlined />}\n            />\n            <Wallet\n              color=\"#888888\"\n              provider={localProvider}\n              ensProvider={ensProvider}\n              price={price}\n              address={faucetAddress}\n            />\n          </Tooltip>\n        }\n      />\n    </span>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}